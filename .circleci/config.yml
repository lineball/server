version: 2 # use CircleCI 2.0
jobs: # a collection of steps
  build:

    working_directory: ~/repo

    docker: # run the steps with Docker
      - image: circleci/openjdk:11-jdk-browsers

    steps:

      - checkout

      - run: chmod +x gradlew

      - restore_cache:
                keys:
                - v1-dependencies-{{ checksum "build.gradle" }}
                # fallback to using the latest cache if no exact match is found
                - v1-dependencies-

      - run: ./gradlew dependencies

       - save_cache:
                 paths:
                   - ~/.m2
                 key: v1-dependencies-{{ checksum "build.gradle" }}

      - run: ./gradlew test